---
import type { Post } from '~/types'

export interface Props {
  post: Post
}

const { post } = Astro.props

const imageUrl = post.mainImage?.asset?.url
const link = post.slug?.current ? `/posts/${post.slug.current}` : '#'
---

<article class="mb-6 transition intersect-once intersect-quarter motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade">
  {imageUrl && (
    <a href={link}>
      <img
        src={imageUrl}
        alt={post.title}
        class="w-full md:h-64 rounded shadow-lg object-cover mb-6"
        loading="lazy"
        decoding="async"
      />
    </a>
  )}

  <h3 class="text-xl sm:text-2xl font-bold leading-tight mb-2 font-heading dark:text-slate-300">
    <!-- Linha pedida explicitamente -->
    <a href={`/posts/${post.slug.current}`}>{post.title}</a>
  </h3>

  {post.publishedAt && (
    <p class="text-sm text-muted dark:text-slate-400 mb-1">
      {new Date(post.publishedAt).toLocaleDateString()}
    </p>
  )}

  {post.excerpt && (
    <p class="text-base text-slate-600 dark:text-slate-400">{post.excerpt}</p>
  )}
</article>
